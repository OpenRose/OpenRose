@*
 * OpenRose - Requirements Management
 * Licensed under the Apache License, Version 2.0.
 * See the LICENSE file or visit https://github.com/OpenRose/OpenRose for more details.
*@

@page "/settings/"
@using OpenRose.WebUI.Components.Pages.Orphan.DeleteAllOrphan
@using OpenRose.WebUI.Services
@inject AssemblyInfoService AssemblyInfo

<MudPaper Class="pa-3 mb-3 align-start d-flex" Style="width: auto " Outlined="false">
    <MudStack Row="true" Spacing="3">
        <MudIcon Icon="@Icons.Material.Filled.LocalFlorist" Size="Size.Large" />
        <MudText Typo="Typo.h6" Align="Align.Left">About OpenRose </MudText>
        <MudChip T="string" Icon="@Icons.Material.Filled.Web" Size="Size.Small" Color="Color.Primary">
            WebUI Version - @version
        </MudChip>
        <MudChip T="string" Icon="@Icons.Material.Filled.Api" Size="Size.Small" Color="Color.Primary">
            API Version - @(ConfigService.ApiVersion ?? "Not Connected")
        </MudChip>
    </MudStack>
</MudPaper>

@if (!string.IsNullOrEmpty(ConfigService.ApiVersionMismatchMessage))
{
    <MudText Typo="Typo.body1" Color="Color.Error">
        @ConfigService.ApiVersionMismatchMessage
    </MudText>
}

<br />

@if (showDeleteAllOrphanItemz)
{
    <DeleteAllOrphanComponent />
}

@code {

    [Inject] private ConfigurationService ConfigService { get; set; } = default!;

    bool showDeleteAllOrphanItemz = false;

    private string version;

    protected override async Task OnInitializedAsync()
    {
        showDeleteAllOrphanItemz = true;
        version = AssemblyInfo.GetAssemblyVersion();
    }
}
