@*
 * OpenRose - Requirements Management
 * Licensed under the Apache License, Version 2.0.
 * See the LICENSE file or visit https://github.com/OpenRose/OpenRose for more details.
*@

@* 
We currently have many different ItemzType selection dialog box which can be merged into single component here is the list
of such dialog boxes that can be shared across multiple places. 

OpenRose\OpenRose.Web\OpenRose.WebUI\Components\Dialogs\SelectTargetItemzTypeDialog.razor
OpenRose\OpenRose.Web\OpenRose.WebUI\Components\Pages\MoveItemz\SelectTargetItemzTypeDialog.razor
OpenRose\OpenRose.Web\OpenRose.WebUI\Components\Pages\MoveItemzType\SelectTargetItemzTypeDialog.razor
OpenRose\OpenRose.Web\OpenRose.WebUI\Components\Pages\MoveItemzType\SelectSourceItemzTypeDialog.razor

There will be other places where we can improve as well but lets start with this Requirements Itemz dialog box.
 *@

<MudDialog>
    <TitleContent>
        <MudText Color="Color.Primary">@MudDialog.Title</MudText>
    </TitleContent>
    <DialogContent>
        <MudTextField @bind-Value="UserInput" Label="Record ID" Variant="Variant.Text" Immediate="true" /> 
        <MudText Color="Color.Error" Dense="true">@ErrorMessage</MudText>
    </DialogContent>
    <DialogActions>
        <MudButton Variant="Variant.Filled" Color="Color.Success" OnClick="Submit">Yes</MudButton>
        <MudButton Variant="Variant.Filled" Color="Color.Error" OnClick="Cancel">No</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; }
    
    [Parameter] public string ActionContext { get; set; } = ""; // Usually "Source" or "Target"

    private string UserInput { get; set; } = string.Empty; 
    private string ErrorMessage { get; set; } = string.Empty;
    
	private void Submit() 
    { 
        if (Guid.TryParse(UserInput, out Guid inputItemzTypeId))
        { 
            MudDialog.Close(DialogResult.Ok(inputItemzTypeId));
        } 
        else 
        { 
            ErrorMessage = $"Please enter a valid GUID as {ActionContext} Itemz Type ID.";
        } 
    }

    private void Cancel() => MudDialog.Cancel();
}

